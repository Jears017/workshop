{"ast":null,"code":"import _regeneratorRuntime from\"/home/jears0177/2021/deploy-workshop/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/jears0177/2021/deploy-workshop/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/home/jears0177/2021/deploy-workshop/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from'react';import axios from\"axios\";import c from'./Orders.module.css';import{Link}from\"react-router-dom\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export var Orders=function Orders(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),order=_useState2[0],setOrder=_useState2[1];useEffect(function(){axios.get('https://workshop-application77.herokuapp.com/api/receipt/').then(function(res){return setOrder(res.data);});});var deleteHandler=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(id){var newOrder;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return axios.delete(\"https://workshop-application77.herokuapp.com/api/receipt/\".concat(id));case 2:newOrder=order.filter(function(order){return order._id===id;});setOrder(newOrder);case 4:case\"end\":return _context.stop();}}},_callee);}));return function deleteHandler(_x){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:c.addButtonContainer,children:[/*#__PURE__*/_jsx(\"h2\",{children:\"\\u0417\\u0430\\u043A\\u0430\\u0437\\u044B:\"}),/*#__PURE__*/_jsx(Link,{to:'/add-order',children:/*#__PURE__*/_jsx(\"div\",{className:c.addButton,children:\" +\"})})]}),/*#__PURE__*/_jsxs(\"table\",{className:\"table\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"#\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"\\u041A\\u043B\\u0438\\u0435\\u043D\\u0442\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"\\u041D\\u043E\\u043C\\u0435\\u0440\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"\\u0414\\u0430\\u0442\\u0430 \\u043F\\u0440\\u0438\\u0451\\u043C\\u0430\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"\\u0414\\u0430\\u0442\\u0430 \\u0432\\u044B\\u0434\\u0430\\u0447\\u0438\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"\\u0418\\u0437\\u0434\\u0435\\u043B\\u0438\\u0435\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"\\u041F\\u0435\\u0440\\u0435\\u0447\\u0435\\u043D\\u044C \\u0440\\u0430\\u0431\\u043E\\u0442\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"\\u0421\\u0443\\u043C\\u043C\\u0430\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Actions\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:order.map(function(receipt,idx){return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{scope:\"row\",children:idx+1}),/*#__PURE__*/_jsx(\"td\",{children:receipt.client}),/*#__PURE__*/_jsx(\"td\",{children:receipt.number}),/*#__PURE__*/_jsx(\"td\",{children:receipt.dateStart.slice(0,10)}),/*#__PURE__*/_jsx(\"td\",{children:receipt.dateEnd}),/*#__PURE__*/_jsx(\"td\",{children:receipt.products.map(function(res,idx){return/*#__PURE__*/_jsx(\"div\",{children:res.productName},idx);})}),/*#__PURE__*/_jsx(\"td\",{children:receipt.products.map(function(res,idx){return/*#__PURE__*/_jsx(\"div\",{children:res.action},idx);})}),/*#__PURE__*/_jsxs(\"td\",{children:[receipt.sum,\" \\u0440\\u0443\\u0431.\"]}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsxs(\"div\",{className:c.actionSection,children:[/*#__PURE__*/_jsx(Link,{to:\"/edit-order/\".concat(receipt._id),children:/*#__PURE__*/_jsx(\"div\",{className:'btn btn-primary',children:\"edit\"})}),/*#__PURE__*/_jsx(Link,{to:\"/receipt/\".concat(receipt._id),children:/*#__PURE__*/_jsx(\"div\",{className:'btn btn-primary',children:\"print\"})}),/*#__PURE__*/_jsx(\"input\",{className:'btn btn-primary',type:\"button\",value:'delete',onClick:function onClick(){return deleteHandler(receipt._id);}})]})})]},idx);})})]})]});};","map":{"version":3,"sources":["/home/jears0177/2021/deploy-workshop/client/src/components/Orders/Orders.js"],"names":["React","useEffect","useState","axios","c","Link","Orders","order","setOrder","get","then","res","data","deleteHandler","id","delete","newOrder","filter","_id","addButtonContainer","addButton","map","receipt","idx","client","number","dateStart","slice","dateEnd","products","productName","action","sum","actionSection"],"mappings":"meAAA,MAAOA,CAAAA,KAAP,EAAeC,SAAf,CAA0BC,QAA1B,KAAyC,OAAzC,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CACA,MAAOC,CAAAA,CAAP,KAAc,qBAAd,CACA,OAAQC,IAAR,KAAmB,kBAAnB,C,wFAEA,MAAO,IAAMC,CAAAA,MAAM,CAAG,QAATA,CAAAA,MAAS,EAAM,CACxB,cAA0BJ,QAAQ,CAAC,EAAD,CAAlC,wCAAOK,KAAP,eAAcC,QAAd,eACAP,SAAS,CAAC,UAAM,CACZE,KAAK,CAACM,GAAN,CAAU,2DAAV,EAAuEC,IAAvE,CAA4E,SAAAC,GAAG,QAAIH,CAAAA,QAAQ,CAACG,GAAG,CAACC,IAAL,CAAZ,EAA/E,EAEH,CAHQ,CAAT,CAKA,GAAMC,CAAAA,aAAa,0FAAG,iBAAOC,EAAP,qJACZX,CAAAA,KAAK,CAACY,MAAN,oEAAyED,EAAzE,EADY,QAEZE,QAFY,CAEDT,KAAK,CAACU,MAAN,CAAa,SAAAV,KAAK,QAAIA,CAAAA,KAAK,CAACW,GAAN,GAAcJ,EAAlB,EAAlB,CAFC,CAGlBN,QAAQ,CAACQ,QAAD,CAAR,CAHkB,sDAAH,kBAAbH,CAAAA,aAAa,4CAAnB,CAOA,mBACI,oCACI,aAAK,SAAS,CAAET,CAAC,CAACe,kBAAlB,wBACI,6DADJ,cAEI,KAAC,IAAD,EAAM,EAAE,CAAE,YAAV,uBACI,YAAK,SAAS,CAAEf,CAAC,CAACgB,SAAlB,gBADJ,EAFJ,GADJ,cAOI,eAAO,SAAS,CAAC,OAAjB,wBACI,oCACA,mCACI,WAAI,KAAK,CAAC,KAAV,eADJ,cAEI,WAAI,KAAK,CAAC,KAAV,kDAFJ,cAGI,WAAI,KAAK,CAAC,KAAV,4CAHJ,cAII,WAAI,KAAK,CAAC,KAAV,2EAJJ,cAKI,WAAI,KAAK,CAAC,KAAV,2EALJ,cAMI,WAAI,KAAK,CAAC,KAAV,wDANJ,cAOI,WAAI,KAAK,CAAC,KAAV,6FAPJ,cAQI,WAAI,KAAK,CAAC,KAAV,4CARJ,cASI,WAAI,KAAK,CAAC,KAAV,qBATJ,GADA,EADJ,cAcI,uBACCb,KAAK,CAACc,GAAN,CAAU,SAACC,OAAD,CAAUC,GAAV,CAAkB,CACzB,mBACI,mCACI,WAAI,KAAK,CAAC,KAAV,UAAiBA,GAAG,CAAG,CAAvB,EADJ,cAEI,oBAAKD,OAAO,CAACE,MAAb,EAFJ,cAGI,oBAAKF,OAAO,CAACG,MAAb,EAHJ,cAII,oBAAKH,OAAO,CAACI,SAAR,CAAkBC,KAAlB,CAAwB,CAAxB,CAA2B,EAA3B,CAAL,EAJJ,cAKI,oBAAKL,OAAO,CAACM,OAAb,EALJ,cAMI,oBAAKN,OAAO,CAACO,QAAR,CAAiBR,GAAjB,CAAqB,SAACV,GAAD,CAAMY,GAAN,qBAAc,qBAAgBZ,GAAG,CAACmB,WAApB,EAAUP,GAAV,CAAd,EAArB,CAAL,EANJ,cAOI,oBAAKD,OAAO,CAACO,QAAR,CAAiBR,GAAjB,CAAqB,SAACV,GAAD,CAAMY,GAAN,qBAAc,qBAAgBZ,GAAG,CAACoB,MAApB,EAAUR,GAAV,CAAd,EAArB,CAAL,EAPJ,cAQI,sBAAKD,OAAO,CAACU,GAAb,0BARJ,cASI,iCACI,aAAK,SAAS,CAAE5B,CAAC,CAAC6B,aAAlB,wBACI,KAAC,IAAD,EAAM,EAAE,uBAAiBX,OAAO,CAACJ,GAAzB,CAAR,uBACI,YAAK,SAAS,CAAE,iBAAhB,kBADJ,EADJ,cAII,KAAC,IAAD,EAAM,EAAE,oBAAcI,OAAO,CAACJ,GAAtB,CAAR,uBACI,YAAK,SAAS,CAAE,iBAAhB,mBADJ,EAJJ,cAOI,cAAO,SAAS,CAAE,iBAAlB,CACO,IAAI,CAAC,QADZ,CAEO,KAAK,CAAE,QAFd,CAGO,OAAO,CAAE,yBAAML,CAAAA,aAAa,CAACS,OAAO,CAACJ,GAAT,CAAnB,EAHhB,EAPJ,GADJ,EATJ,GAASK,GAAT,CADJ,CA2BH,CA5BA,CADD,EAdJ,GAPJ,GADJ,CAwDH,CAtEM","sourcesContent":["import React, {useEffect, useState} from 'react'\nimport axios from \"axios\";\nimport c from './Orders.module.css'\nimport {Link} from \"react-router-dom\";\n\nexport const Orders = () => {\n    const [order, setOrder] = useState([])\n    useEffect(() => {\n        axios.get('https://workshop-application77.herokuapp.com/api/receipt/').then(res => setOrder(res.data))\n\n    })\n\n    const deleteHandler = async (id) => {\n        await axios.delete(`https://workshop-application77.herokuapp.com/api/receipt/${id}`)\n        const newOrder = order.filter(order => order._id === id)\n        setOrder(newOrder)\n    }\n\n\n    return (\n        <div>\n            <div className={c.addButtonContainer}>\n                <h2>Заказы:</h2>\n                <Link to={'/add-order'}>\n                    <div className={c.addButton}> +</div>\n                </Link>\n            </div>\n            <table className=\"table\">\n                <thead>\n                <tr>\n                    <th scope=\"col\">#</th>\n                    <th scope=\"col\">Клиент</th>\n                    <th scope=\"col\">Номер</th>\n                    <th scope=\"col\">Дата приёма</th>\n                    <th scope=\"col\">Дата выдачи</th>\n                    <th scope=\"col\">Изделие</th>\n                    <th scope=\"col\">Перечень работ</th>\n                    <th scope=\"col\">Сумма</th>\n                    <th scope=\"col\">Actions</th>\n                </tr>\n                </thead>\n                <tbody>\n                {order.map((receipt, idx) => {\n                    return (\n                        <tr key={idx}>\n                            <th scope=\"row\">{idx + 1}</th>\n                            <td>{receipt.client}</td>\n                            <td>{receipt.number}</td>\n                            <td>{receipt.dateStart.slice(0, 10)}</td>\n                            <td>{receipt.dateEnd}</td>\n                            <td>{receipt.products.map((res, idx) => <div key={idx}>{res.productName}</div>)}</td>\n                            <td>{receipt.products.map((res, idx) => <div key={idx}>{res.action}</div>)}</td>\n                            <td>{receipt.sum} руб.</td>\n                            <td>\n                                <div className={c.actionSection}>\n                                    <Link to={`/edit-order/${receipt._id}`}>\n                                        <div className={'btn btn-primary'}>edit</div>\n                                    </Link>\n                                    <Link to={`/receipt/${receipt._id}`}>\n                                        <div className={'btn btn-primary'}>print</div>\n                                    </Link>\n                                    <input className={'btn btn-primary'}\n                                           type=\"button\"\n                                           value={'delete'}\n                                           onClick={() => deleteHandler(receipt._id)}\n                                    />\n                                </div>\n                            </td>\n                        </tr>\n                    )\n                })}\n                </tbody>\n            </table>\n        </div>\n    )\n}"]},"metadata":{},"sourceType":"module"}