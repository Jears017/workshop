{"ast":null,"code":"import _regeneratorRuntime from\"/home/jears0177/2021/deploy-workshop/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/jears0177/2021/deploy-workshop/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/home/jears0177/2021/deploy-workshop/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from'react';import axios from\"axios\";import c from'./Orders.module.css';import{Link}from\"react-router-dom\";import{OrderTable}from\"../Order-Table/Order-Table\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export var Orders=function Orders(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),order=_useState2[0],setOrder=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),date=_useState4[0],setDate=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),query=_useState6[0],setQuery=_useState6[1];useEffect(function(){axios.get('https://workshop-application77.herokuapp.com/api/receipt/').then(function(res){return setOrder(res.data);});});var dateHandler=function dateHandler(e){setDate(e.target.value);};var queryHandler=function queryHandler(e){setQuery(e.target.value);};var deleteHandler=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(id){var newOrder;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return axios.delete(\"https://workshop-application77.herokuapp.com/api/receipt/\".concat(id));case 2:newOrder=order.filter(function(order){return order._id===id;});setOrder(newOrder);case 4:case\"end\":return _context.stop();}}},_callee);}));return function deleteHandler(_x){return _ref.apply(this,arguments);};}();var submitHandler=function submitHandler(e){e.preventDefault();var newOrder=order.filter(function(order){return order.client.includes(query);});setOrder(newOrder);};/*if(date){\n       const newOrder = order.filter(order => order.dateEnd === date)\n        setOrder(newOrder)\n    }*/return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:c.addButtonContainer,children:[/*#__PURE__*/_jsx(\"h2\",{children:\"\\u0417\\u0430\\u043A\\u0430\\u0437\\u044B:\"}),/*#__PURE__*/_jsx(\"div\",{className:c.search,children:/*#__PURE__*/_jsx(\"input\",{className:\"form-control\",onChange:queryHandler,value:query,placeholder:\"\\u041D\\u0430\\u0447\\u0430\\u0442\\u044C \\u043F\\u043E\\u0438\\u0441\\u043A...\",type:\"text\"})}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"input\",{className:\"form-control\",onChange:dateHandler,value:date,type:\"date\"})}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(Link,{to:'/add-order',children:/*#__PURE__*/_jsx(\"div\",{className:c.addButton,children:\"+\"})})})]}),/*#__PURE__*/_jsx(OrderTable,{order:date?order.filter(function(order){return order.dateEnd===date;}):order,deleteHandler:deleteHandler,query:query})]});};","map":{"version":3,"sources":["/home/jears0177/2021/deploy-workshop/client/src/components/Orders/Orders.js"],"names":["React","useEffect","useState","axios","c","Link","OrderTable","Orders","order","setOrder","date","setDate","query","setQuery","get","then","res","data","dateHandler","e","target","value","queryHandler","deleteHandler","id","delete","newOrder","filter","_id","submitHandler","preventDefault","client","includes","addButtonContainer","search","addButton","dateEnd"],"mappings":"meAAA,MAAOA,CAAAA,KAAP,EAAeC,SAAf,CAA0BC,QAA1B,KAAyC,OAAzC,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CACA,MAAOC,CAAAA,CAAP,KAAc,qBAAd,CACA,OAAQC,IAAR,KAAmB,kBAAnB,CACA,OAAQC,UAAR,KAAyB,4BAAzB,C,wFAEA,MAAO,IAAMC,CAAAA,MAAM,CAAG,QAATA,CAAAA,MAAS,EAAM,CACxB,cAA0BL,QAAQ,CAAC,EAAD,CAAlC,wCAAOM,KAAP,eAAcC,QAAd,eACA,eAAwBP,QAAQ,CAAC,EAAD,CAAhC,yCAAOQ,IAAP,eAAaC,OAAb,eACA,eAA0BT,QAAQ,CAAC,EAAD,CAAlC,yCAAOU,KAAP,eAAcC,QAAd,eACAZ,SAAS,CAAC,UAAM,CACZE,KAAK,CAACW,GAAN,CAAU,2DAAV,EAAuEC,IAAvE,CAA4E,SAAAC,GAAG,QAAIP,CAAAA,QAAQ,CAACO,GAAG,CAACC,IAAL,CAAZ,EAA/E,EAEH,CAHQ,CAAT,CAKA,GAAMC,CAAAA,WAAW,CAAG,QAAdA,CAAAA,WAAc,CAACC,CAAD,CAAO,CACvBR,OAAO,CAACQ,CAAC,CAACC,MAAF,CAASC,KAAV,CAAP,CACH,CAFD,CAIA,GAAMC,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,CAACH,CAAD,CAAO,CACxBN,QAAQ,CAACM,CAAC,CAACC,MAAF,CAASC,KAAV,CAAR,CACH,CAFD,CAKA,GAAME,CAAAA,aAAa,0FAAG,iBAAOC,EAAP,qJACZrB,CAAAA,KAAK,CAACsB,MAAN,oEAAyED,EAAzE,EADY,QAEZE,QAFY,CAEDlB,KAAK,CAACmB,MAAN,CAAa,SAAAnB,KAAK,QAAIA,CAAAA,KAAK,CAACoB,GAAN,GAAcJ,EAAlB,EAAlB,CAFC,CAGlBf,QAAQ,CAACiB,QAAD,CAAR,CAHkB,sDAAH,kBAAbH,CAAAA,aAAa,4CAAnB,CAMA,GAAMM,CAAAA,aAAa,CAAG,QAAhBA,CAAAA,aAAgB,CAACV,CAAD,CAAO,CACzBA,CAAC,CAACW,cAAF,GACA,GAAMJ,CAAAA,QAAQ,CAAGlB,KAAK,CAACmB,MAAN,CAAa,SAAAnB,KAAK,QAAIA,CAAAA,KAAK,CAACuB,MAAN,CAAaC,QAAb,CAAsBpB,KAAtB,CAAJ,EAAlB,CAAjB,CACAH,QAAQ,CAACiB,QAAD,CAAR,CACH,CAJD,CAMA;AACJ;AACA;AACA,OAGI,mBACI,oCACI,aAAK,SAAS,CAAEtB,CAAC,CAAC6B,kBAAlB,wBACI,6DADJ,cAEI,YAAK,SAAS,CAAE7B,CAAC,CAAC8B,MAAlB,uBACI,cAAO,SAAS,CAAC,cAAjB,CAAgC,QAAQ,CAAEZ,YAA1C,CAAwD,KAAK,CAAEV,KAA/D,CAAsE,WAAW,CAAC,wEAAlF,CACO,IAAI,CAAC,MADZ,EADJ,EAFJ,cAMI,kCACI,cAAO,SAAS,CAAC,cAAjB,CAAgC,QAAQ,CAAEM,WAA1C,CAAuD,KAAK,CAAER,IAA9D,CAAoE,IAAI,CAAC,MAAzE,EADJ,EANJ,cASI,kCACI,KAAC,IAAD,EAAM,EAAE,CAAE,YAAV,uBACI,YAAK,SAAS,CAAEN,CAAC,CAAC+B,SAAlB,eADJ,EADJ,EATJ,GADJ,cAgBI,KAAC,UAAD,EACI,KAAK,CAAEzB,IAAI,CAAGF,KAAK,CAACmB,MAAN,CAAa,SAAAnB,KAAK,QAAIA,CAAAA,KAAK,CAAC4B,OAAN,GAAkB1B,IAAtB,EAAlB,CAAH,CAAmDF,KADlE,CAEI,aAAa,CAAEe,aAFnB,CAGI,KAAK,CAAEX,KAHX,EAhBJ,GADJ,CAwBH,CA5DM","sourcesContent":["import React, {useEffect, useState} from 'react'\nimport axios from \"axios\";\nimport c from './Orders.module.css'\nimport {Link} from \"react-router-dom\";\nimport {OrderTable} from \"../Order-Table/Order-Table\";\n\nexport const Orders = () => {\n    const [order, setOrder] = useState([])\n    const [date, setDate] = useState('')\n    const [query, setQuery] = useState('')\n    useEffect(() => {\n        axios.get('https://workshop-application77.herokuapp.com/api/receipt/').then(res => setOrder(res.data))\n\n    })\n\n    const dateHandler = (e) => {\n        setDate(e.target.value)\n    }\n\n    const queryHandler = (e) => {\n        setQuery(e.target.value)\n    }\n\n\n    const deleteHandler = async (id) => {\n        await axios.delete(`https://workshop-application77.herokuapp.com/api/receipt/${id}`)\n        const newOrder = order.filter(order => order._id === id)\n        setOrder(newOrder)\n    }\n\n    const submitHandler = (e) => {\n        e.preventDefault()\n        const newOrder = order.filter(order => order.client.includes(query))\n        setOrder(newOrder)\n    }\n\n    /*if(date){\n       const newOrder = order.filter(order => order.dateEnd === date)\n        setOrder(newOrder)\n    }*/\n\n\n    return (\n        <div>\n            <div className={c.addButtonContainer}>\n                <h2>Заказы:</h2>\n                <div className={c.search}>\n                    <input className=\"form-control\" onChange={queryHandler} value={query} placeholder='Начать поиск...'\n                           type=\"text\"/>\n                </div>\n                <div>\n                    <input className=\"form-control\" onChange={dateHandler} value={date} type=\"date\"/>\n                </div>\n                <div>\n                    <Link to={'/add-order'}>\n                        <div className={c.addButton}>+</div>\n                    </Link>\n                </div>\n            </div>\n            <OrderTable\n                order={date ? order.filter(order => order.dateEnd === date) : order}\n                deleteHandler={deleteHandler}\n                query={query}\n            />\n        </div>\n    )\n}"]},"metadata":{},"sourceType":"module"}