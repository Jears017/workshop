{"ast":null,"code":"import _regeneratorRuntime from\"/home/jears0177/2021/deploy-workshop/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/jears0177/2021/deploy-workshop/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/home/jears0177/2021/deploy-workshop/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from'react';import c from'./Products.module.css';import{Link}from\"react-router-dom\";import axios from'axios';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export var Products=function Products(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),products=_useState2[0],setProducts=_useState2[1];useEffect(function(){axios.get('https://workshop-application77.herokuapp.com/api/products/').then(function(res){return setProducts(res.data);});},[products.length]);var deleteHandler=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(id){var del;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return axios.delete(\"https://workshop-application77.herokuapp.com/api/products/\".concat(id));case 2:del=products.filter(function(product){return product._id!==id;});setProducts(del);case 4:case\"end\":return _context.stop();}}},_callee);}));return function deleteHandler(_x){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:c.addButtonContainer,children:[/*#__PURE__*/_jsx(\"h2\",{children:\"\\u0418\\u0437\\u0434\\u0435\\u043B\\u0438\\u044F:\"}),/*#__PURE__*/_jsx(Link,{to:'/create-product',children:/*#__PURE__*/_jsx(\"div\",{className:c.addButton,children:\"+\"})})]}),/*#__PURE__*/_jsx(\"div\",{className:c.productsTable,children:/*#__PURE__*/_jsxs(\"table\",{className:'table',children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"#\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"\\u041D\\u0430\\u0438\\u043C\\u0435\\u043D\\u043E\\u0432\\u0430\\u043D\\u0438\\u0435\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"\\u0414\\u0435\\u0439\\u0441\\u0442\\u0432\\u0438\\u0435\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"\\u0421\\u0442\\u043E\\u0438\\u043C\\u043E\\u0441\\u0442\\u044C\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"actions\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:products.map(function(receipt,idx){return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{scope:\"row\",children:idx+1}),/*#__PURE__*/_jsx(\"td\",{children:receipt.name}),/*#__PURE__*/_jsx(\"td\",{children:receipt.action}),/*#__PURE__*/_jsxs(\"td\",{children:[receipt.price,\" \\u0440\\u0443\\u0431.\"]}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsxs(\"div\",{className:c.actionSection,children:[/*#__PURE__*/_jsx(Link,{to:\"/edit-product/\".concat(receipt._id),children:/*#__PURE__*/_jsx(\"div\",{className:'btn btn-primary',children:\"edit\"})}),/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return deleteHandler(receipt._id);},className:'btn btn-primary',type:\"button\",value:'delete',children:\"delete\"})]})})]},idx);})})]})})]});};","map":{"version":3,"sources":["/home/jears0177/2021/deploy-workshop/client/src/components/Products/Products.js"],"names":["React","useEffect","useState","c","Link","axios","Products","products","setProducts","get","then","res","data","length","deleteHandler","id","delete","del","filter","product","_id","addButtonContainer","addButton","productsTable","map","receipt","idx","name","action","price","actionSection"],"mappings":"meAAA,MAAOA,CAAAA,KAAP,EAAeC,SAAf,CAA0BC,QAA1B,KAAyC,OAAzC,CACA,MAAOC,CAAAA,CAAP,KAAc,uBAAd,CACA,OAAQC,IAAR,KAAmB,kBAAnB,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,C,wFAGA,MAAO,IAAMC,CAAAA,QAAQ,CAAG,QAAXA,CAAAA,QAAW,EAAM,CAC1B,cAAgCJ,QAAQ,CAAC,EAAD,CAAxC,wCAAOK,QAAP,eAAiBC,WAAjB,eACAP,SAAS,CAAC,UAAM,CACZI,KAAK,CAACI,GAAN,CAAU,4DAAV,EAAwEC,IAAxE,CAA6E,SAAAC,GAAG,QAAIH,CAAAA,WAAW,CAACG,GAAG,CAACC,IAAL,CAAf,EAAhF,EACH,CAFQ,CAEN,CAACL,QAAQ,CAACM,MAAV,CAFM,CAAT,CAIA,GAAMC,CAAAA,aAAa,0FAAG,iBAAOC,EAAP,gJACZV,CAAAA,KAAK,CAACW,MAAN,qEAA0ED,EAA1E,EADY,QAEZE,GAFY,CAENV,QAAQ,CAACW,MAAT,CAAgB,SAAAC,OAAO,QAAIA,CAAAA,OAAO,CAACC,GAAR,GAAgBL,EAApB,EAAvB,CAFM,CAGlBP,WAAW,CAACS,GAAD,CAAX,CAHkB,sDAAH,kBAAbH,CAAAA,aAAa,4CAAnB,CAMA,mBACI,oCACI,aAAK,SAAS,CAAEX,CAAC,CAACkB,kBAAlB,wBACI,mEADJ,cAEI,KAAC,IAAD,EAAM,EAAE,CAAE,iBAAV,uBACI,YAAK,SAAS,CAAElB,CAAC,CAACmB,SAAlB,eADJ,EAFJ,GADJ,cAOI,YAAK,SAAS,CAAEnB,CAAC,CAACoB,aAAlB,uBACI,eAAO,SAAS,CAAE,OAAlB,wBACI,oCACA,mCACI,WAAI,KAAK,CAAC,KAAV,eADJ,cAEI,WAAI,KAAK,CAAC,KAAV,sFAFJ,cAGI,WAAI,KAAK,CAAC,KAAV,8DAHJ,cAII,WAAI,KAAK,CAAC,KAAV,oEAJJ,cAKI,WAAI,KAAK,CAAC,KAAV,qBALJ,GADA,EADJ,cAUI,uBACChB,QAAQ,CAACiB,GAAT,CAAa,SAACC,OAAD,CAAUC,GAAV,CAAkB,CAC5B,mBACI,mCACI,WAAI,KAAK,CAAC,KAAV,UAAiBA,GAAG,CAAG,CAAvB,EADJ,cAEI,oBAAKD,OAAO,CAACE,IAAb,EAFJ,cAGI,oBAAKF,OAAO,CAACG,MAAb,EAHJ,cAII,sBAAKH,OAAO,CAACI,KAAb,0BAJJ,cAKI,iCACI,aAAK,SAAS,CAAE1B,CAAC,CAAC2B,aAAlB,wBACI,KAAC,IAAD,EAAM,EAAE,yBAAmBL,OAAO,CAACL,GAA3B,CAAR,uBACI,YAAK,SAAS,CAAE,iBAAhB,kBADJ,EADJ,cAII,eAAQ,OAAO,CAAE,yBAAMN,CAAAA,aAAa,CAACW,OAAO,CAACL,GAAT,CAAnB,EAAjB,CACQ,SAAS,CAAE,iBADnB,CAEQ,IAAI,CAAC,QAFb,CAGQ,KAAK,CAAE,QAHf,oBAJJ,GADJ,EALJ,GAASM,GAAT,CADJ,CAqBH,CAtBA,CADD,EAVJ,GADJ,EAPJ,GADJ,CAgDH,CA5DM","sourcesContent":["import React, {useEffect, useState} from 'react'\nimport c from './Products.module.css'\nimport {Link} from \"react-router-dom\";\nimport axios from 'axios'\n\n\nexport const Products = () => {\n    const [products, setProducts] = useState([])\n    useEffect(() => {\n        axios.get('https://workshop-application77.herokuapp.com/api/products/').then(res => setProducts(res.data))\n    }, [products.length])\n\n    const deleteHandler = async (id) => {\n        await axios.delete(`https://workshop-application77.herokuapp.com/api/products/${id}`)\n        const del = products.filter(product => product._id !== id)\n        setProducts(del)\n    }\n\n    return (\n        <div>\n            <div className={c.addButtonContainer}>\n                <h2>Изделия:</h2>\n                <Link to={'/create-product'}>\n                    <div className={c.addButton}>+</div>\n                </Link>\n            </div>\n            <div className={c.productsTable}>\n                <table className={'table'}>\n                    <thead>\n                    <tr>\n                        <th scope=\"col\">#</th>\n                        <th scope=\"col\">Наименование</th>\n                        <th scope=\"col\">Действие</th>\n                        <th scope=\"col\">Стоимость</th>\n                        <th scope=\"col\">actions</th>\n                    </tr>\n                    </thead>\n                    <tbody>\n                    {products.map((receipt, idx) => {\n                        return (\n                            <tr key={idx}>\n                                <th scope=\"row\">{idx + 1}</th>\n                                <td>{receipt.name}</td>\n                                <td>{receipt.action}</td>\n                                <td>{receipt.price} руб.</td>\n                                <td>\n                                    <div className={c.actionSection}>\n                                        <Link to={`/edit-product/${receipt._id}`}>\n                                            <div className={'btn btn-primary'}>edit</div>\n                                        </Link>\n                                        <button onClick={() => deleteHandler(receipt._id)}\n                                                className={'btn btn-primary'}\n                                                type=\"button\"\n                                                value={'delete'}\n                                        >delete\n                                        </button>\n                                    </div>\n                                </td>\n                            </tr>\n                        )\n                    })}\n                    </tbody>\n                </table>\n            </div>\n        </div>\n    )\n}"]},"metadata":{},"sourceType":"module"}